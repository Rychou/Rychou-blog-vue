webpackJsonp([1],{"/3BZ":function(t,e){},"/Hv2":function(t,e){},"3gPM":function(t,e){},"55Bn":function(t,e){},"6/h3":function(t,e){},"8JN4":function(t,e){},"8c57":function(t,e){},"8wpR":function(t,e){},KYC2:function(t,e){},M89r:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("IvJb"),o=n("t+b9"),s=n.n(o),r=(n("/Hv2"),n("3gPM"),n("M89r"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var a=n("vSla")({name:"App"},r,!1,function(t){n("gWrm")},null,null).exports,l=n("zO6J"),c=n("3cXf"),u=n.n(c),d=n("9rMa");i.default.use(d.a);var m=new d.a.Store({state:{token:JSON.parse(window.sessionStorage.getItem("token"))},getters:{isLogin:function(t){if(console.log(t),t.token){var e=t.token,n=e.token,i=e.expiresIn,o=void 0!==n,s=new Date>1e3*i;return o&&!s}return!1}},mutations:{LOGIN:function(t,e){t.token=e,window.sessionStorage.setItem("token",u()(e))},LOGOUT:function(t){t.token=null,window.sessionStorage.removeItem("token")}},actions:{UserLogin:function(t,e){(0,t.commit)("LOGIN",e)},UserLogout:function(t){(0,t.commit)("LOGOUT")}}}),f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"menu",attrs:{"default-active":t.$route.path,router:!0,collapse:t.isCollapse,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("div",{staticClass:"Rychou",on:{click:function(e){t.$router.push("/")}}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:"/static/img/avatar.jpg",alt:""}})]),t._v(" "),t.isCollapse?t._e():n("div",[n("span",{staticStyle:{"text-shadow":"black 0.2em 0.2em 0.3em"}},[t._v("Rychou")]),n("br"),t._v(" "),n("span",{staticStyle:{"text-shadow":"black 0.2em 0.2em 0.3em"}},[t._v("准大三前端一枚")])])]),t._v(" "),n("el-menu-item",{attrs:{index:"/"}},[n("i",{staticClass:"iconfont icon-yemian"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("首页")])]),t._v(" "),n("el-menu-item",{attrs:{index:"/movie"}},[n("i",{staticClass:"iconfont icon-dianying"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("电影")])]),t._v(" "),n("el-menu-item",{attrs:{index:""}},[n("i",{staticClass:"iconfont icon-aixin"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[n("a",{attrs:{href:"../../static/two_year/index.html"}},[t._v("两周年")])])]),t._v(" "),n("el-menu-item",{attrs:{index:"/backend"}},[n("i",{staticClass:"iconfont icon-iconfontguanlixitong"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("后台管理")])]),t._v(" "),n("el-footer",{staticClass:"menu-footer"},t._l(t.menuFooter,function(t,e){return n("span",{key:e},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.title,placement:"right"}},[n("a",{attrs:{href:t.link}},[n("i",{staticClass:"iconfont",class:t.icon,staticStyle:{color:"#fff",cursor:"pointer"}})])])],1)})),t._v(" "),n("div",{staticClass:"collapse",on:{click:t.collapse}},[t.isCollapse?n("i",{staticClass:"iconfont icon-right"}):n("i",{staticClass:"iconfont icon-left"})])],1)},staticRenderFns:[]};var p=n("vSla")({data:function(){return{isCollapse:!1,menuFooter:[{title:"Github",link:"http://github.com/xxxsimons",icon:"icon-github"},{title:"思否",link:"https://segmentfault.com/u/xxxsimons",icon:"icon-sf"}]}},methods:{collapse:function(){this.isCollapse=!this.isCollapse}},watch:{isCollapse:function(t,e){var n=t?64:200;this.$emit("test",n)}}},f,!1,function(t){n("x8mc")},"data-v-3491035b",null).exports,v=n("rVsN"),h=n.n(v),g=n("aozt"),_=n.n(g).a.create({baseURL:"http://120.79.88.123:8080",timeout:5e3,headers:{"Content-Type":"application/json;charset=UTF-8"}});_.interceptors.request.use(function(t){return m.state.token&&(t.headers.Authorization="Bearer "+m.state.token.token),t}),_.interceptors.response.use(function(t){return t},function(t){if(t.response)switch(t.response.status){case 401:bt.replace({path:"login",query:{redirect:bt.currentRoute.fullPath}})}return h.a.reject(t.response)});var b={getArticleList:function(){return _.get("/api/article/getArticleList")},getArticleById:function(t){return _.get("/api/article/getArticleById?id="+t)},updateArticle:function(t){return _.post("/api/backend/updateArticle",t)},newArticle:function(t){return _.post("/api/backend/newArticle",t)},deleteArticle:function(t){return _.post("/api/backend/deleteArticle",t)},getMovies:function(){return _.get("/api/movie/getMovies")},addMovie:function(t){return _.post("/api/backend/addMovie",t)},userRegister:function(t){return _.post("/api/user/register",t)},userLogin:function(t){return console.log(t),_.post("/api/user/login",{userName:t.userName,password:t.password})},getUser:function(){return _.get("/api/user")},delUser:function(t){return _.post("/api/delUser",t)}},y=n("g3tB"),w=n.n(y);function x(t){return(t=new Date(t)).getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function k(t,e){return new Date(e.create_time)-new Date(t.create_time)}var C={data:function(){return{ArticleList:[]}},methods:{getContent:function(t){var e=this.ArticleList[t].content;e.length>100&&(this.ArticleList[t].content=e.substr(e,100)+"...")},formatDate:x},created:function(){var t=this;b.getArticleList().then(function(e){for(var n in t.ArticleList=e.data.sort(k),t.ArticleList)t.ArticleList[n].content=w()(t.ArticleList[n].content,{sanitize:!0})}).catch(function(t){console.log(t)})},components:{marked:w.a}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.ArticleList,function(e,i){return n("div",{key:i},[n("div",{staticClass:"card"},[n("el-card",{attrs:{"body-style":{padding:"10px"}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("h1",[n("router-link",{attrs:{to:{path:"/article/"+e.id,params:{id:e.id}}}},[t._v(t._s(e.title))])],1)]),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("div",{staticClass:"ql-container ql-snow",staticStyle:{border:"none"}},[n("div",{staticClass:"ql-editor"},[n("div",{staticClass:"article-content",domProps:{innerHTML:t._s(e.content)}},[t._v(t._s(t.getContent(i)))])])]),t._v(" "),n("router-link",{attrs:{to:{path:"/article/"+e.id,params:{id:e.id}}}},[n("el-button",{staticClass:"readmore",attrs:{type:"info",round:"",size:"mini"}},[t._v("Read More")])],1),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"bottom clearfix"},[n("el-tag",{attrs:{size:"mini"}},[t._v(t._s(e.author))]),t._v(" "),n("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(t.formatDate(e.create_time)))])],1)],1)])],1)])}))},staticRenderFns:[]};var S=n("vSla")(C,A,!1,function(t){n("RaSe")},"data-v-b23a5554",null).exports,$={components:{MyMenu:p,ArticleList:S},data:function(){return{asideWidth:200}},methods:{getAsideWidth:function(t){this.asideWidth=t}}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",{staticClass:"container"},[e("el-aside",{staticClass:"aside hidden-xs-only",attrs:{width:this.asideWidth+"px"}},[e("my-menu",{on:{test:this.getAsideWidth}})],1),this._v(" "),e("el-container",{staticClass:"main"},[e("el-main",{staticStyle:{padding:"0",width:"100%",transition:"all .5s"}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var E=n("vSla")($,T,!1,function(t){n("wGPp")},"data-v-6f56e232",null).exports,L=n("IHPB"),F=n.n(L),M=n("Rw8D"),R={name:"editor",components:{mavonEditor:M.mavonEditor},props:["content"],data:function(){return{}},computed:{editorContent:{get:function(){return this.content},set:function(){}}},methods:{setContent:function(){console.log(this.editorContent),this.$emit("transferContent",this.editorContent)}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"editor"}},[n("mavon-editor",{staticStyle:{height:"100%"},on:{input:t.setContent},model:{value:t.editorContent,callback:function(e){t.editorContent=e},expression:"editorContent"}})],1)},staticRenderFns:[]};var U=n("vSla")(R,q,!1,function(t){n("6/h3")},null,null).exports,D={name:"add-tags",props:["tags"],data:function(){return{inputVisible:!1,inputValue:""}},computed:{dynamicTags:function(){return console.log(this.tags),void 0===this.tags?[]:this.tags}},methods:{handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1),this.$emit("setTags",this.dynamicTags)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&(this.dynamicTags.push(t),this.$emit("setTags",this.dynamicTags)),this.inputVisible=!1,this.inputValue=""}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.dynamicTags,function(e){return n("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){t.handleClose(e)}}},[t._v("\n        "+t._s(e)+"\n        ")])}),t._v(" "),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2)},staticRenderFns:[]};var N=n("vSla")(D,I,!1,function(t){n("ah4V")},null,null).exports,B={data:function(){return{form:{title:"",content:"",tags:[]},rules:{title:[{required:!0,message:"请输入标题",trigger:"change"}],content:[{required:!0,message:"请输入内容"}],tags:[{required:!0,message:"请输入标签",trigger:"blur"}]}}},components:{editor:U,AddTags:N,mavonEditor:M.mavonEditor},methods:{submitForm:function(t){var e=this;console.log(this.form.tags),this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;b.newArticle({title:e.form.title,content:e.form.content,create_time:new Date,tags:e.form.tags.join(","),author:"rychou"}).then(function(t){t.data.insertState?(e.$message({message:"发布成功",type:"success"}),e.$router.push("/")):e.$message({message:"发布成功",type:"warning"})}).catch(function(t){console.log(t)})})},getTags:function(t){console.log("tags"+t),this.form.tags=[].concat(F()(t)),console.log(this.form.tags)}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-container"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题",autofocus:!0,clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[n("mavon-editor",{staticStyle:{height:"580px"},attrs:{boxShadow:!1,codeStyle:"vs2015",ishljs:!0},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"添加标签",prop:"tags"}},[n("add-tags",{attrs:{tags:this.form.tags},on:{setTags:t.getTags}})],1),t._v(" "),n("el-form-item",[n("el-button",{on:{click:function(e){t.submitForm("form")}}},[t._v("发布")])],1)],1)],1)},staticRenderFns:[]};var O=n("vSla")(B,z,!1,function(t){n("mwoR")},"data-v-350d607c",null).exports,V=n("aA9S"),P=n.n(V),j=(n("sE+D"),{name:"article-directories",props:{ArticleDirectories:{type:Array,default:[],require:!0}},data:function(){return{}},computed:{directories:function(){return this.ArticleDirectories}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{goAnchor:function(t){document.documentElement.scrollTop=this.directories[t].offsetTop},handleScroll:function(t){var e=this,n=document.documentElement.scrollTop;this.directories.forEach(function(t,i){if(n+50>=t.offsetTop){for(var o=0;o<i;o++)e.directories[o].isActive=!1;t.isActive=!0}else t.isActive=!1})}}}),G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"directories-container"},[n("div",{staticClass:"directories-list"},[n("h2",[t._v("目录")]),t._v(" "),t._l(t.directories,function(e,i){return n("div",{key:i,class:{"highlight-title":e.isActive},staticStyle:{padding:"5px 12px"}},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.goAnchor(i)}}},[t._v("\n        "+t._s(e.title)+"\n      ")])])})],2)])},staticRenderFns:[]};var H=n("vSla")(j,G,!1,function(t){n("/3BZ")},"data-v-af0ebbe8",null).exports,J={methods:{toTop:function(){document.documentElement.scrollTop=document.body.scrollTop=0}}},W={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"back-to-top el-icon-caret-top",on:{click:this.toTop}})},staticRenderFns:[]};var K=n("vSla")(J,W,!1,function(t){n("8c57")},"data-v-77505b54",null).exports,Y={name:"article",components:{marked:w.a,ArticleDirectories:H,BackToTop:K},data:function(){return{article:{lastArticle:{},nextArticle:{}},directories:[],compileMarkdown:"",gitalk:new Gitalk({clientID:"e2bd0f9b2722aec0c6ad",clientSecret:"53835a03c25dd0886da48d665df21258f2b30177",repo:"xxxsimons.github.io",owner:"xxxsimons",admin:["xxxsimons"],id:window.location.hash,distractionFreeMode:!1}),isShow:!1}},computed:{tags:function(){return"[object Undefined]"===Object.prototype.toString.call(this.article.tags)?[]:this.article.tags.split(",")}},created:function(){this.initlizeData(this.$route.params.id),window.addEventListener("scroll",this.handleScroll,!1)},beforeRouteUpdate:function(t,e,n){this.initlizeData(t.params.id),n()},methods:{formatDate:x,initlizeData:function(t){var e=this,n={article:{lastArticle:{},nextArticle:{}},directories:[],compileMarkdown:"",gitalk:new Gitalk({clientID:"e2bd0f9b2722aec0c6ad",clientSecret:"53835a03c25dd0886da48d665df21258f2b30177",repo:"xxxsimons.github.io",owner:"xxxsimons",admin:["xxxsimons"],id:window.location.hash,distractionFreeMode:!1})};b.getArticleById(t).then(function(t){P()(e,n),P()(e.article,t.data),setTimeout(function(){return e.getDirectories()},100),document.title=t.data.title}).then(function(){e.compileMarkdown=w()(e.article.content,{sanitize:!0}),document.documentElement.scrollTop=0}).then(function(){document.getElementById("gitalk-container").innerHTML="",e.gitalk.options.id=window.location.hash,e.gitalk.render("gitalk-container")}).catch(function(t){console.log(t)})},getDirectories:function(){var t=this;this.directories=[],document.querySelectorAll(".article-content h1").forEach(function(e,n){e.id="anchor-"+n,t.directories.push({title:e.innerText,offsetTop:e.offsetTop,isActive:!1})})},handleScroll:function(){this.isShow=document.documentElement.scrollTop>800}}},Z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"article"},[n("h1",[t._v(t._s(t.article.title))]),t._v(" "),n("div",{staticClass:"article-description"},[t._l(t.tags,function(e,i){return n("el-tag",{key:i,staticStyle:{"margin-right":"3px"},attrs:{size:"small"}},[t._v(t._s(e))])}),t._v(" "),n("span",{staticClass:"author",staticStyle:{margin:"0 10px",color:"#2c86b3"}},[t._v(t._s(t.article.author))]),t._v(" "),n("span",{staticClass:"post-time"},[n("i",{staticClass:"el-icon-date"}),t._v("\n        "+t._s(t.formatDate(t.article.create_time))+"\n      ")]),t._v(" "),n("span",{staticClass:"views"},[n("i",{staticClass:"iconfont icon-views"}),t._v("\n        "+t._s(t.article.views)+"\n      ")])],2),t._v(" "),n("hr"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"article-body"},[n("el-row",{staticStyle:{width:"100%"},attrs:{gutter:10}},[n("el-col",{attrs:{xs:24,span:18}},[n("div",{staticClass:"article-content"},[n("div",{directives:[{name:"highlight",rawName:"v-highlight"}],domProps:{innerHTML:t._s(t.compileMarkdown)}}),t._v(" "),n("div",{staticClass:"last-next"},[t.article.lastArticle.title?n("div",{staticClass:"last"},[n("router-link",{attrs:{to:"/article/"+t.article.lastArticle.id}},[n("i",{staticClass:"iconfont icon-left"}),t._v("\n                  上一篇："+t._s(t.article.lastArticle.title)+"\n                ")])],1):t._e(),t._v(" "),t.article.nextArticle.title?n("div",{staticClass:"next"},[n("router-link",{attrs:{to:"/article/"+t.article.nextArticle.id}},[t._v("\n                  下一篇："+t._s(t.article.nextArticle.title)+"\n                  "),n("i",{staticClass:"iconfont icon-right"})])],1):t._e()])])]),t._v(" "),n("el-col",{staticClass:"article-directories ",attrs:{xs:0,span:6}},[n("article-directories",{staticClass:"hidden-xs-only",attrs:{ArticleDirectories:t.directories}})],1)],1)],1)]),t._v(" "),n("div",{staticStyle:{padding:"20px"},attrs:{id:"gitalk-container"}}),t._v(" "),n("back-to-top",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]})],1)},staticRenderFns:[]};var X=n("vSla")(Y,Z,!1,function(t){n("8JN4")},null,null).exports,Q={data:function(){return{ArticleList:[]}},mounted:function(){this.getArticleList()},methods:{deleteArticle:function(t,e){var n=this;this.$confirm("你确定要删除文章《"+e+"》？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){b.deleteArticle({id:t}).then(function(t){t.data.deleteState?n.$message({type:"success",message:"删除成功！"}):n.$message({type:"warn",message:"删除失败！"}),n.getArticleList()}).catch(function(t){return console.log(t)})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},getArticleList:function(){var t=this;b.getArticleList().then(function(e){t.ArticleList=[].concat(F()(e.data))}).catch(function(t){console.log(t)})}}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-link",{attrs:{to:"/backend/newArticle"}},[n("el-button",[t._v("\n      写文章\n    ")])],1),t._v(" "),n("router-link",{attrs:{to:"/backend/addMovie"}},[n("el-button",[t._v("\n      新增电影\n    ")])],1),t._v(" "),n("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.ArticleList}},[n("el-table-column",{attrs:{prop:"id",label:"Id",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"create_time",label:"日期",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"author",label:"作者"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{path:"/backend/editArticle/"+e.row.id,params:{id:e.row.id}}}},[n("el-button",{attrs:{type:"text",size:"small"}},[t._v("\n            编辑\n          ")])],1),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.deleteArticle(e.row.id,e.row.title)}}},[t._v("\n          删除\n        ")])]}}])})],1)],1)},staticRenderFns:[]};var et=n("vSla")(Q,tt,!1,function(t){n("KYC2")},"data-v-5fae08ef",null).exports,nt={name:"edit-article",data:function(){return{form:{},rules:{title:[{required:!0,message:"请输入标题",trigger:"change"}],content:[{required:!0,message:"请输入内容"}]}}},components:{mavonEditor:M.mavonEditor,AddTags:N},created:function(){var t=this;b.getArticleById(this.$route.params.id).then(function(e){t.form=e.data,t.form.tags=t.form.tags.split(","),console.log(e)}).catch(function(t){console.log(t)})},methods:{submitForm:function(t){var e=this;console.log(this.form),this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;b.updateArticle({id:e.$route.params.id,title:e.form.title,content:e.form.content,create_time:e.form.create_time,tags:e.form.tags.join(","),author:"rychou"}).then(function(t){t.data.updateState?(e.$message({message:"修改成功！",type:"success"}),e.$router.push("/backend")):e.$message({message:"修改失败！",type:"warning"})}).catch(function(t){console.log(t)})})},getTags:function(t){console.log("tags"+t),this.form.tags=[].concat(F()(t)),console.log(this.form.tags)}}},it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-container"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px",rules:t.rules}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{placeholder:"请输入标题",clearable:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"文章内容",prop:"content"}},[n("mavon-editor",{staticStyle:{height:"580px"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"添加标签",prop:"tags"}},[n("add-tags",{attrs:{tags:this.form.tags},on:{setTags:t.getTags}})],1),t._v(" "),n("el-form-item",[n("el-button",{on:{click:function(e){t.submitForm("form")}}},[t._v("修改")])],1)],1)],1)},staticRenderFns:[]};var ot=n("vSla")(nt,it,!1,function(t){n("8wpR")},null,null).exports,st={data:function(){return{user:{userName:"",password:""},loginRules:{userName:[{required:!0,message:"用户名不能为空！"}],password:[{required:!0,message:"密码不能为空！"}]}}},methods:{submit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.user),b.userLogin(e.user).then(function(t){var n=t.data;1===n.code?(e.$store.dispatch("UserLogin",n.token),e.$message({message:"登陆成功！",type:"success"}),e.$router.push("/backend")):e.$message.error("用户名或密码错误！")}).catch(function(t){return console.log(t)})})}}},rt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"user",attrs:{model:t.user,rules:t.loginRules}},[n("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[n("el-input",{model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submit("user")}},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"pramary"},on:{click:function(e){t.submit("user")}}},[t._v("登陆")])],1)],1)},staticRenderFns:[]};var at=n("vSla")(st,rt,!1,function(t){n("Se+k")},null,null).exports,lt=n("ZLEe"),ct=n.n(lt),ut=n("6yg2"),dt=n.n(ut),mt={data:function(){return{movies:[],form:{name:"",movie:{},downloadUrl:"",type:"marget"},rules:{name:[{required:!0,message:"请选择电影",trigger:"blur"}],downloadUrl:[{type:"string",required:!0}],type:[{type:"string",required:!0}]}}},computed:{hasMovie:function(){return ct()(this.form.movie).length}},methods:{querySearchAsync:function(t,e){var n=this;dt()("http://api.douban.com/v2/movie/search?q="+t,null,function(t,i){t?console.error(t.message):(n.movies=i.subjects,e(n.movies))})},handleSelect:function(t){console.log(t),this.form.movie=t,this.form.name=t.title},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.axios.addMovie({id:e.form.movie.id,data:u()(e.form.movie),downloadUrl:e.form.downloadUrl,type:e.form.type}).then(function(t){console.log(t),t.data.addState?(e.$message({message:"新增成功",type:"success"}),e.$router.back()):(e.$message.error("新增失败，请重试！"),e.resetForm())})})},resetForm:function(t){this.$refs[t].resetFields(),this.form.name=""}}},ft={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[t.hasMovie?n("el-card",{staticClass:"movie-card",attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",attrs:{src:t.form.movie.images.small}}),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",{staticClass:"title"},[t._v(t._s(t.form.movie.title))]),t._v(" "),n("div",{staticClass:"actors"},[n("span",{staticClass:"actors"},t._l(t.form.movie.casts,function(e,i){return n("span",{key:i},[t._v("\n            "+t._s(e.name)+"\n          ")])}))])])]):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"搜索电影",prop:"name"}},[n("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearchAsync,placeholder:"请输入电影名","trigger-on-focus":!1},on:{select:t.handleSelect},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return[n("div",{staticClass:"search-item"},[n("span",{staticClass:"name"},[t._v(t._s(i.title))]),t._v(" "),n("br"),t._v(" "),n("span",{staticClass:"actors"},t._l(i.casts,function(e,i){return n("span",{key:i},[t._v("\n              "+t._s(e.name)+"\n            ")])}))])]}}]),model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"下载类型",prop:"type"}},[n("el-radio",{attrs:{label:"marget"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("磁力链接")]),t._v(" "),n("el-radio",{attrs:{label:"thunder"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("迅雷链接")]),t._v(" "),n("el-radio",{attrs:{label:"torrent"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("BT种子")])],1),t._v(" "),n("el-form-item",{attrs:{label:"下载链接",prop:"downloadUrl"}},[n("el-input",{model:{value:t.form.downloadUrl,callback:function(e){t.$set(t.form,"downloadUrl",e)},expression:"form.downloadUrl"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("form")}}},[t._v("立即创建")]),t._v(" "),n("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)},staticRenderFns:[]};var pt=n("vSla")(mt,ft,!1,function(t){n("55Bn")},"data-v-2931e49a",null).exports,vt={data:function(){return{movies:[]}},mounted:function(){var t=this;this.axios.getMovies().then(function(e){console.log(e),t.parse(e.data)}).catch(function(t){return console.error(t)})},methods:{parse:function(t){var e=this;t.forEach(function(t){e.movies.push({id:t.id,downloadUrl:t.downloadUrl,type:t.type,data:JSON.parse(t.data)})})},onCopy:function(t){this.$message({message:"复制成功",type:"success"})},onError:function(t){this.$message.error("复制失败")},downloadTitle:function(t){switch(t){case"thunder":return"迅雷链接:";case"torrent":return"种子下载:";default:return"磁力链接:"}}}},ht={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:20}},t._l(t.movies,function(e,i){return n("el-col",{key:i,attrs:{span:4}},[n("el-card",{staticClass:"movie",attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",attrs:{src:e.data.images.small}}),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",{staticClass:"title"},[t._v(t._s(e.data.title))]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"actors"},t._l(e.data.casts,function(e,i){return n("span",{key:i},[t._v("\n                "+t._s(e.name)+"\n              ")])})),t._v(" "),n("el-popover",{attrs:{placement:"bottom-end",trigger:"click"}},[n("div",[t._v(t._s(t.downloadTitle(e.type))+" "+t._s(e.downloadUrl)+"\n                "),n("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.downloadUrl,expression:"movie.downloadUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticClass:"el-icon-document",staticStyle:{cursor:"pointer"}})]),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("查看下载链接")])],1)],1)])])],1)}))],1)},staticRenderFns:[]};var gt=n("vSla")(vt,ht,!1,function(t){n("YruK")},null,null).exports;i.default.use(l.a);var _t=new l.a({routes:[{path:"/",name:"Home",component:E,children:[{path:"/",name:"ArticleList",component:S},{path:"/movie",name:"MovieList",component:gt},{path:"/article/:id",component:X},{path:"/backend",name:"backend",component:et,meta:{requiresAuth:!0}},{path:"/backend/newArticle",name:"newArticle",component:O,meta:{requiresAuth:!0}},{path:"/backend/addMovie",name:"addMovie",component:pt,meta:{requiresAuth:!0}},{path:"/backend/editArticle/:id",component:ot,meta:{requiresAuth:!0}},{path:"/user/login",component:at}]}]});_t.beforeEach(function(t,e,n){console.log(m.getters.isLogin),t.meta.requiresAuth?m.getters.isLogin?n():n({path:"/user/login",query:{redirect:t.fullPath}}):n()});var bt=_t,yt=n("eh2P"),wt=n.n(yt),xt=n("KPKd"),kt=n.n(xt);i.default.use(kt.a),i.default.directive("highlight",function(t){t.querySelectorAll("pre code").forEach(function(t){wt.a.highlightBlock(t)})}),i.default.prototype.axios=b,i.default.use(s.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:bt,store:m,components:{App:a},template:"<App/>"})},RaSe:function(t,e){},"Se+k":function(t,e){},YruK:function(t,e){},ah4V:function(t,e){},gWrm:function(t,e){},mwoR:function(t,e){},"sE+D":function(t,e){},wGPp:function(t,e){},x8mc:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f75b7b59a7d0ddc0b6a0.js.map